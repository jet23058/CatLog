# Changelog

本專案的所有重大變更都將記錄於此文件中。




## [2.7.1] - 2026-01-23

### 修復 (Fixed)
- **iOS 主畫面圖示**：修復將網頁加入 iPhone/iPad 主畫面時圖示遺失的問題。
- **PWA 支援**：新增 `manifest.json` 與 `apple-touch-icon`，提升行動裝置瀏覽體驗。

## [2.7.0] - 2026-01-23

### 新增 (Added)
- **花費匯入優化 (Expense Import)**：
  - **正數金額處理**：修正匯入邏輯，正確識別退款 (Refund) 為負向支出（即正數收益），確保收支計算精確。
  - **合併模式 (Merge Logic)**：匯入 CSV 時改採「合併」策略，僅更新檔案中存在的月份資料，保留其他歷史紀錄，大幅提升資料安全性。
- **匯入確認機制 (Import Confirmation)**：
  - **預覽視窗**：在匯入 JSON 備份或 CSV 花費前，新增確認彈窗。
  - **詳細差異 (Detailed Diff)**：
    - JSON：列出資產、收入、花費與備忘錄的覆蓋筆數對比。
    - CSV：依月份列出花費變動，並支援**展開明細**，逐筆檢視即將寫入的交易項目（含退款標示）。
- **隱私模式 (Privacy Mode)**：
  - **全域金額遮蔽**：新增「眼睛」開關，一鍵隱藏所有敏感金額（顯示為 `****`）。
  - **覆蓋範圍**：
    - 首頁：年度資產、增長率、各類統計指標。
    - 列表：月份總資產、各月收益與損益。
    - 明細：資產細項、花費金額、收入金額。
  - **安全防護**：隱私模式下自動停用相關 Tooltip 與分析氣泡框，防止滑鼠誤觸洩漏資訊。

## [2.6.0] - 2025-12-28

### 🌟 品牌重塑 (Rebranding)
- **全新名稱**：應用程式正式更名為 **CatLog**。
  - 統一品牌識別：
    - Browser Title: **CatLog**
    - Login Screen: **CatLog**
    - README: **CatLog**

### ✨ 工程效能與品質 (Engineering Excellence)
- **測試框架整合 (Testing Infrastructure)**：
  - 引入 **Vitest** 與 **React Testing Library**，建立完整的單元測試與整合測試環境。
  - **測試覆蓋**：
    - 核心資料操作 (新增資產/收入、匯入/匯出)。
    - 首頁與詳情頁 UI 互動。
    - 驗證流程 (Authentication Flow)。
  - **品質保證**：修復了 `DetailView` 資料並發更新 (Race Condition) 的潛在錯誤。
- **CI/CD 自動化**：
  - 建立 **GitHub Actions** Workflow (`ci.yml`)。
  - 確保每次 Push 到 `main` 分支時自動執行完整測試套件，嚴格把關程式碼品質。
- **雲端整合 (Cloud Integration)**：
  - **Dropbox 匯入**：新增從 Dropbox 直接匯入 Moze CSV 花費紀錄的功能。
    - 採用 **Dropbox Chooser API**，無需額外授權即可安全選取檔案。
    - 支援 Moze 匯出的標準 CSV 格式。
  - **智能匯率快取 (Smart Exchange Rate Cache)**：
    - 新增記憶功能：系統會自動記住您在「新增收入」與「新增資產」時使用的每個月份、每種幣別的匯率。
    - 跨功能共享：在同一個月份內，無論是記帳或新增資產，都能自動帶入已輸入過的匯率，大幅減少重複輸入。

## [2.5.0] - 2025-12-28

### 🌟 品牌重塑 (Rebranding)
- **全新名稱**：應用程式正式更名為 **CatLog** (原 Capital View)。
  - 取意自 "Catalog" (目錄) 與 "Cat" (貓) 的結合，打造您的個人資產目錄。
- **視覺升級**：
  - **主題色調**：全面換新為 **Amber-400 (紙箱金)** 主題，象徵溫暖與活力。
  - **輔助配色**：引入 **Blue-500 (牛仔藍)** 代表清晰的資訊與信任感。
  - **介面優化**：背景調整為極簡 **純白 (White)**，提升閱讀舒適度。
  - **趣味元素**：在資產卡片中加入極簡的 **貓咪剪影** 與 **腳印** 浮水印，增添操作樂趣。

### 變更 (Changed)
- **圖表風格**：全面更新圖表 (Area Chart) 的漸層色系，由冷冽的藍綠色轉為溫暖的琥珀金。
- **互動體驗**：更新所有的按鈕 hover 效果、Badge 標籤與 Tooltip 樣式以符合新品牌識別。

## [2.4.1] - 2025-12-28

### 變更 (Changed)
- **FIRE 計算器增強**：
  - **年度統計**：在 FIRE Modal 中新增「年度花費統計」列表，顯示各年度的月平均花費、最高月支出與最低月支出（含發生月份）。
  - **互動優化**：修復提領率 (Rate) 輸入框無法順暢輸入小數點的問題。
  - **介面改善**：將年度花費統計列表改為可獨立滑動 (Scrollable)，避免資料過長時推擠上方主資訊或超出畫面，提升閱讀體驗。

## [2.4.0] - 2025-12-28


### 變更 (Changed)
- **介面優化**：
  - 將「FIRE 目標」、「對帳單」、「個股績效」整合至 Header 右上角的 **"進階 (Advanced)"** 選單中，優化主畫面空間與操作動線。
  - **FIRE 目標**：從 Dashboard 卡片改為彈出式 Modal，保持主畫面整潔。
  - **ICON 更新**：為各功能項目配置專屬圖示，提升辨識度。

## [2.3.0] - 2025-12-28


### 新增 (Added)
- **FIRE 目標計算器 (Financial Independence Goal)**：
  - 新增 FIRE 目標進度卡片，顯示於年度統計下方。
  - **自動運算**：根據歷史花費紀錄自動計算「平均月支出」與「預估年支出」。
  - **自訂參數**：支援使用者即時調整「提領率 (Withdrawal Rate)」（預設 4.0%），無需重新整理。
  - **進度追蹤**：視覺化呈現當前資產與 FIRE 目標金額的達成率 (Progress Bar)。
  - **資料持久化**：使用者的提領率設定會自動儲存至雲端，保持個人化體驗。

## [2.2.0] - 2025-12-28


### 新增 (Added)
- **對帳單功能 (Statement Reconciliation)**：
  - 新增「對帳單」模組，協助使用者進行信用卡或帳戶對帳。
  - **自訂區間**：預設選取「上月15日」至「本月16日」作為對帳週期。
  - **帳戶篩選**：可依照花費帳戶 (如信用卡、現金) 篩選交易紀錄。
  - **互動確認**：提供勾選功能 (Checkbox) 標記已核對項目，並即時計算「已確認金額」與「總金額」。
  - **暫存機制**：此功能僅供檢視與核對，勾選狀態不進行永久儲存，關閉視窗後即重置。
  - **快速入口**：於 Dashboard Header 新增「對帳單圖示」按鈕。

## [2.1.0] - 2025-12-13

### 新增 (Added)
- **個股績效分析模組** (`StockAnalysisView`)
  - 整合個股績效追蹤功能。
  - **投資概覽**：依據市值顯示持倉分佈的圓餅圖 (Pie Chart)。
  - **個股持倉**：詳細列表顯示每檔股票的成本、市值、未實現損益 (Unrealized P&L) 與投資報酬率 (ROI)。
  - **配息分析**：追蹤每月與年度的現金股息收入趨勢 (Area Chart)。
  - **CSV 匯入**：支援匯入自訂格式的證券交易紀錄 (Category, Date, Name, Debit, Credit, Balance)，包含買賣與股息數據。
- **導航優化**：在主畫面 Header 新增「趨勢圖示」按鈕，可快速切換至個股分析頁面。

### 變更 (Changed)
- **品牌重塑**：應用程式名稱由 "喵喵資產" 正式更名為 **Capital View**。
- **介面更新**：
  - 更新瀏覽器標題 (Title) 為 "Capital View"。
  - 更新 Dashboard Header 顯示為 "Capital View"。
  - 更新 `README.md` 以反映新功能與專業品牌形象。

### 修復 (Fixed)
- 修復 `AuthenticatedApp` 中 `handleDataUpdate` 未定義的錯誤，確保在匯入 CSV 資料時能正確觸發雲端同步與持久化儲存。
